#!/usr/bin/env perl
# ALSA MIDI filter
# Copyright 2013  Jim Cochrane - GNU GPL, verson 2

use Modern::Perl;
use File::Basename;
use constant::boolean;
use Data::Dumper;
use Carp;

BEGIN {
#!!!!!!!!!!!!!!	my $progname = basename($0);
	my $progpath = dirname($0);
say "inc before: ", Dumper(@INC);
	push @INC, "$progpath/../lib";
	push @INC, "$progpath/../lib/midifilter";
say "inc after ", Dumper(@INC);
}

use MIDI_EventStream;
use AppConfiguration;

my $app = AppConfiguration->new();
$app->debug();
my $stream = $app->midi_stream();

say "starting ", $app->application_name();
say "app verbose: ", ($app->verbose()? 'yes': 'no');
$stream->process();
